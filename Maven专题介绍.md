#### `Maven`专题介绍

##### 一、为什么使用`Maven`？

- 借助于`maven`将一个项目拆分成多个工程，便于管理；
- 代替项目中使用`jar`包，不再需要“复制”、“粘贴”到项目的`lib`中；
- 省去官网下载`jar`包的时间；
- 不需要考虑`jar`包版本不一致的风险；
- 不用管理jar包间错综复杂的依赖关系。

##### 二、什么是`Maven`？

`maven`是一款服务于`java`平台的自动化构建工具；

构建：把动态的Web工程经过编译得到的编译结果部署到服务器上的过程；

编译：`.java`源文件->编译->`.class`字节码文件；

部署：最终部署的不是动态`web`工程，而是编译后的文件。

**构建过程：**

- 清理clean：将以前编译得到的旧文件`class`字节码文件删除；
- 编译compile：将`java`源程序编译成`class`字节码文件；
- 测试test：自动测试，自动调用`junit`程序；
- 报告report：测试程序执行的结果；
- 打包package：动态`Web`工程打`War`包，`java`工程打`jar`包；
- 安装install：将打包得到的文件复制到“仓库”中的指定位置；
- 部署deploy：将动态`Web`工程生成的`war`包部署到容器下，使其可以运行。

##### 三、Maven目录结构

![](.\images\Maven结构.png)

**目录介绍：**

![](.\images\Maven目录结构.png)

##### 四、`pom.xml`配置文件

它是`maven`的核心配置文件，所有的构建的配置都在这里设置。

`maven`坐标：使用下三个向量在仓库中确定唯一一个`maven`工程，如下图所示：

![](.\images\Maven坐标.png)

**依赖范围：**

scope就是依赖的范围

**1、compile，**默认值，适用于所有阶段（开发、测试、部署、运行），依赖会存在所有阶段；

**2、provided，**只在开发、测试阶段使用，目的是不让`Servlet`容器和本地仓库的jar包冲突 ，如`servlet.jar`；

**3、runtime，**只在运行时使用，如`JDBC`驱动，适用于运行和测试阶段；

**4、test，**只在测试时使用，用于编译和运行测试代码，不会随项目发布；

##### 五、`Maven`的生命周期

Maven有三套相互独立的生命周期，注意这里说的是“三套”，而且“相互独立”。Maven的生命周期不是一个整体，这三套生命周期分别是：

1） `Clean Lifecycle  `：在进行真正的构建之前进行一些清理工作，`Clean`生命周期一共包含了三个阶段：

- `pre-clean`：执行一些需要在`clean`之前完成的工作；
- `clean`：删除所有上一次构建生成的文件；
- `post-clean`：执行一些需要在clean之后立刻完成的工作。

2）`Default Lifecycle `：构建的核心部分，包括`compile、test、package、install、deploy`5个阶段。

- `compile`：编译项目的源代码；
- `test`：使用单元测试运行测试；
- `package`：接收编译好的代码，打包成可发布的格式；
- `install`：将打好的包安装到`Maven`本地仓库，供本地其他`Maven`项目使用；
- `deploy`：将最终的包部署到远程仓库，供其他开发人员和`Maven`项目使用。

3）`Site Lifecycle`：`site`生命周期的目的是建立和发布项目站点，该生命周期包含如下阶段：

- `pre-site`：执行一些在生成项目站点之前需要完成的工作；
- `site`：生成项目站点文档；
- `post-site`：执行一些在生成项目站点之后需要完成的工作；
- `site-ploy`：将生成的项目站点发布到服务器上。

